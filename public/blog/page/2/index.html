
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Blog.XDite.net</title>
  <meta name="author" content="xdite">

  
  <meta name="description" content="                  Essntial Rails Pattern 這本書已經進入排版階段。各位已經購買的讀者，近期信箱應該會開始一直收到本書的 update。感謝你們一直以來的耐心等候。這本書絕對不會讓你們失望。===樣章線上預覽。目錄線上預覽如果有任何書籍內容錯誤，和 Bil...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="fb:admins" content="577398551" />

  
  <link rel="canonical" href="http://blog.xdite.net/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/xxddite" rel="alternate" title="Blog.XDite.net" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

-->

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/"><img src="/images/h1.png" alt="Blog.XDite.net"></a></h1>
  
    <h2>Ruby / Rails / Web Development</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/xxddite" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.xdite.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/talks"> Talks</a></li>
  <li><a href="http://rails-101.logdown.com" target="_blank">Books</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/24/essential-rails-pattern-update/">Essential Rails Pattern 開始 Update</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-24T18:33:00+08:00" pubdate  data-updated="true" >Mar 24<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/24/essential-rails-pattern-update/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/24/essential-rails-pattern-update/" data-show-faces="false"></div></div>
    
    <p><a href="http://rails-101.logdown.com/books/3-essential-rails-pattern">Essntial Rails Pattern</a> 這本書已經進入排版階段。</p>

<p>各位已經購買的讀者，近期信箱應該會開始一直收到本書的 update。</p>

<p>感謝你們一直以來的耐心等候。</p>

<p>這本書絕對不會讓你們失望。</p>

<p>===</p>

<p>樣章
線上<a href="https://www.dropbox.com/sh/ueha9xsjw6ybwye/JzNGR_VIr7/ERP-preview.pdf?dl=1">預覽</a>。</p>

<p>目錄</p>

<p>線上<a href="https://www.dropbox.com/sh/5hytcw56xcr86zk/f_Racu5xw3/ERP-toc.pdf?dl=1">預覽</a></p>

<p>如果有任何書籍內容錯誤，和 Billing 上的問題，請透過<a href="http://xdite.wufoo.com/forms/ce-billing-support/">聯絡表單</a> 通知我，協助我改善產品。</p>

<p>如果你有任何學習 Rails 上的問題，請不要害羞，直接上 <a href="http://ruby-taiwan.org">Ruby Taiwan Group</a> 詢問。</p>

  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/19/website-online-todo-5/">網站程式上線前需要準備的事 （五）</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-19T02:13:00+08:00" pubdate  data-updated="true" >Mar 19<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/19/website-online-todo-5/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/19/website-online-todo-5/" data-show-faces="false"></div></div>
    
    <h2>第 5 件事：Close Alpha Test、Close Open Test</h2>

<p>終於談到跟這個系列標題比較吻合的內容了！最後一個月上線前該做些什麼事？</p>

<p>在 本系列<a href="http://blog.xdite.net/posts/2012/03/17/website-online-todo-1/">（一）</a> ，我提到了無論如何最後一個月是測試期。這一個月又分成</p>

<ul>
<li>close alpha</li>
<li>close beta</li>
</ul>


<h3>Close Alpha 內測 (一週)</h3>

<p>close alpha 的對象是開發組以及營運組人員。也就是與核心較為相關的組別。此時針對的測試目標是這個 project 業務上應該被「實作」的 functionalty。比如說是食譜網站，就應該可以</p>

<ul>
<li>上傳食物照片</li>
<li>新增烹飪步驟</li>
<li>站方精選</li>
<li>有熱門食譜、新進食譜</li>
<li>分享到社群網路 &#8230;etc</li>
</ul>


<p>如果是討論區，要應該可以</p>

<ul>
<li>可以發表文章</li>
<li>可以回應文章</li>
<li>可以貼圖</li>
<li>可以收藏</li>
<li>可以搜尋</li>
<li>編輯器運作正常 &#8230;etc.</li>
</ul>


<p>另外測試時要擬定使用「未登入會員」、「登入會員」、「營運權限」、「Admin 權限」各測過一次。</p>

<p>因為開發組成員在撰寫功能時，為了方便，幾乎都是以 admin 帳號在開發，如果不制定測試步驟和角色，很容易沒測到死角。</p>

<p>此時的修復重點放在 feature complete ( 或取捨 ) 以及 functionaly 是否正常運作。</p>

<p><strong> 請不要在此時進行任何 UI 動線調整 </strong>。</p>

<h3>Close Beta 半公測 (二週+)</h3>

<p>close beta 的對象是全公司所有人，公司員工的親朋好友，可以信賴的死忠會員等等&#8230;etc. 此時針對的測試目標是這個 project 的 UI 動線。</p>

<p>如果是討論區：</p>

<ul>
<li>發表的動線是否順暢</li>
<li>是否 UI 的暗示容易讓使用者 miss 掉上傳照片步驟</li>
<li>回應文章的動線是否流暢</li>
<li>網站新訊息的流動是否不夠快速，容易造成網站看起來一片死城。</li>
</ul>


<p>此時已經是視同準上線了（所以 Close Alpha 階段的資料會清掉），所有營運組的人必須視同營運狀態一樣運營站務，以避免正式開站遇到狀況時手忙腳亂。</p>

<p>（這一招是從參訪壹電視時學到的。當時壹電視快開台時有受邀去內部參訪，當時聽到他們已經內部試 run 報新聞 run 了一年時，震撼非常&#8230;XD）</p>

<p>此時的修復重點放在 UI 動線的調整，以及運營方針、步驟的調整，避免開站之後網站就變成死城。</p>

<h3>Performance Tuning 與 Website Optimized （一週）</h3>

<p>我在開發階段時，最常向 RD 宣導的事情是：我不想管你這個功能怎麼寫出來，但我要你準時交出來。（但最少要符合內部寫程式規範，有辦法讀懂）</p>

<p>原因是：網站最重要的是 Deliver 上線。而不是站上的 feature 用了多屌的技術，用了多棒的 best practices，沒有用戶會在意這件事。而「貪玩」「遲交」會砸了一切。</p>

<p>直到 Open Beta 期，Optimized 這件事都不會被提到。因為在網站稍微 stable 之前，所有的 optimized 都毫無意義，做了也是白作。因為會發生效能瓶頸的地方，永遠在你設計時意想不到的地方。</p>

<h4>Backend Performance Tuning</h4>

<p>如何作 Performance Tuning？</p>

<ul>
<li>抓出最慢的地方 Refactor 掉</li>
</ul>


<p>幸運的是，我的專案都是 Rails Project，有<a href="http://newrelic.com/">New Relic</a> 這套軟體可以用。它可以幫你找出你的網站哪一段 Ruby Code 特別沒效率，哪一段 code 製造出來的 SQL query 特別 slow。</p>

<p>其他技巧請看：<a href="http://www.slideshare.net/xuitejoke/rapid-development-with-rails-7394238">Rapid development with Rails</a> P.54- P.59</p>

<ul>
<li><a href="http://wp.xdite.net/?p=1597">Scaling Rails Site：Reading Material # 1</a></li>
<li><a href="http://wp.xdite.net/?p=1617">Scaling Rails Site：Reading Material # 2</a></li>
<li><a href="http://wp.xdite.net/?p=1664">Scaling Rails Site：Reading Material # 3</a></li>
<li><a href="http://wp.xdite.net/?p=1682">Scaling Rails Site：Reading Material # 4</a></li>
<li><a href="http://wp.xdite.net/?p=1704">Scaling Rails Site：Reading Material # 5</a></li>
</ul>


<p>這是其他題目了。有空我會再整理 update 一篇 Rails Performance Tuning 的文章。</p>

<ul>
<li>找出最常造訪的頁面壓力測試</li>
</ul>


<p>既然已經進入 Open Beta 期了，這時候手上應該可以拿到這個網站最常造訪和效率最差的頁面。</p>

<p>可以使用 <a href="http://httpd.apache.org/docs/2.0/programs/ab.html">ab</a> 去對網站進行壓力測試。</p>

<p>再決定是要 refactor slow code 或者是先上 cache 檔著先。</p>

<h4>Frotend Performance Tuning</h4>

<p>影響網站使用者感受最大的其實不是 backend 的效率，而是 Browser side 的效率。上線前我會</p>

<ul>
<li>按照 <a href="http://developer.yahoo.com/performance/rules.html">Best Practices for Speeding Up Your Web Site</a> 調整</li>
</ul>


<p>其他技巧請看：</p>

<ol>
<li><a href="http://www.slideshare.net/xuitejoke/rapid-development-with-rails-7394238">Rapid development with Rails</a> P.42- P.53</li>
<li><a href="http://www.slideshare.net/xuitejoke/scaling-rails-sites-by-default">Scaling Rais Site by default</a></li>
</ol>


<h4>Website Optimized</h4>

<p>以上說的都只是 Performance。但是這跟實際運營沒有那麼大的正關係。我擅長開發的是「內容網站」以及「社群網站」，這一類的網站重點其實是 SEO 以及社群穿透力。</p>

<ul>
<li>SEO 以及 Facebook OpenGraph</li>
</ul>


<p>比如說：這是在 T 客邦累積出來的兩套 gem。</p>

<ul>
<li><a href="https://github.com/techbang/seo_helper">seo_helper</a></li>
<li><a href="https://github.com/techbang/open_graph_helper">open_graph_helper</a></li>
</ul>


<p>網站的每一個頁面都會確保分享至社群網站是正常的。</p>

<ul>
<li>Advertising</li>
</ul>


<p>靠廣告賺錢，所以要調整廣告板位</p>

<ul>
<li>RSS / Email Subscribe / 粉絲團活動經營操作</li>
</ul>


<p>跟 user 的互動&#8230;etc.</p>

<h3>開站</h3>

<p>這些都確認沒什麼問題了，然後才是開站。然而開站不是這一切的結束，還有其他事情需要作&#8230;</p>

<p>＝＝＝＝</p>

<p>系列文章：</p>

<ul>
<li><a href="/posts/2012/03/17/website-online-todo-1/">網站程式上線前需要準備的事 （一）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-2/">網站程式上線前需要準備的事 （二）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-3/">網站程式上線前需要準備的事 （三）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-4/">網站程式上線前需要準備的事 （四）</a></li>
<li><a href="/posts/2012/03/19/website-online-todo-5/">網站程式上線前需要準備的事 （五）</a></li>
</ul>


  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/18/website-online-todo-4/">網站程式上線前需要準備的事 （四）</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-18T16:12:00+08:00" pubdate  data-updated="true" >Mar 18<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/18/website-online-todo-4/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/18/website-online-todo-4/" data-show-faces="false"></div></div>
    
    <h2>第 4 件事：架設一套 issue tracking system</h2>

<p>你用什麼工具來管理軟體專案的進度呢？我曾經一度認為使用 issue tracking 管理專案進度，是一件天經地義的事。大家都是這麼做的，所以這個題目沒什麼好談的。
後來，我才發現這個印象大錯特錯&#8230;</p>

<p><strong> 絕大多數的人真的只用「mail」和「cc」來管專案，that&#8217;s all。(註1) </strong></p>

<p>P.S. issue 真的太多的話，他們會改用 &#8230;<code>Excel</code>！！</p>

<p>ZOMG&#8230;</p>

<h3>What is issue tracking system ?</h3>

<p>Issue Tracking system ，顧名思義就是<code>紀錄</code>、<code>追蹤</code> 問題的系統。<a href="http://www.bugzilla.org/">BugZilla</a>、<a href="trac.edgewall.org">Trac</a>、<a href="http://www.redmine.org/">Redmine</a>、<a href="http://www.atlassian.com/software/jira/overview">JIRA</a>、<a href="http://lighthouseapp.com/">lighthoustapp</a>、<a href="http://basecamp.com/">Basecamp</a> &#8230;等等這幾套軟體，都是知名的 Issue Tracking system。</p>

<p>一套合格的 Issue Tracking system 的 Issue 至少要可以紀錄這些內容：</p>

<ul>
<li>Issue 的主題</li>
<li>Issue 的內容</li>
<li>Issue 現在的狀態 (新建立、已指派、已解決、已回應、已結束、已擱置&#8230;etc)</li>
<li>Issue 優先權 (正常、重要、緊急、輕微、會擋路&#8230;etc.)</li>
<li>Issue 發生日期</li>
<li>Issue 希望解決日期</li>
<li>Issue 實際解決日期</li>
<li>Issue 被分派給誰</li>
<li>Issue 的附件</li>
<li>Isuue 的觀察者有誰</li>
</ul>


<h3>為什麼 email 不管用？</h3>

<p>常人使用的 email 管理法其實會有幾個很大的缺點：</p>

<h4>喪失時間感、無確切完成日期</h4>

<p>專案中最珍貴的資源無非是「時間」。僅使用 email 往來，會造成一個嚴重的假象：大家都一直有信件往來，所以整件事其實是有進度的。但其實，專案進行的速度卻是牛步&#8230;</p>

<p>後面的原因其實是因為：「回信」是一個「順序」執行動作，當一方回了，下一方才能決定要做什麼、要回什麼。「什麼時候」再回（有空回，做完回？）其實沒有人知道。通常一個來回就要搞掉一個上午，甚至是一個整天。但其實整件事沒什麼進展。</p>

<p>這麼浪費效率，逼得某些 PM 還得自己用 TODO list + email tracking label 才可以勉強控制這種局面。</p>

<h4>無確切執行人</h4>

<p>有的 email，cc 者一大堆：A 先指派了 B 作這個工作，但 B 做到一半覺得需要 C 的火力支援，於是把 C 加入這個討論串裡面。C 做到一半覺得不妥，請示長官 D 要如何配合這個專案。往往一整個 mail 牽扯了一大堆人進去，大家討論來討論去，好不熱烈。</p>

<p>但是呢&#8230;誰需要去執行，哪些事需要被執行，什麼時候這些事需要被執行完畢？在這一整個串裡面完全被模糊掉了。</p>

<h4>洩密</h4>

<p>cc 者一大堆。怎麼分得清楚誰有權知道、誰無權知道這一串信裡面提到的執行事項？</p>

<h4>優先權的分配</h4>

<p>一個專案可能同時間有幾十上百條待處理事項需要被執行。請問哪一條需要先被執行？它們的優先權又是用什麼標準決定的呢？</p>

<h4>處理事項目前的執行狀態</h4>

<p>一個較具規模的專案，可能不只一個人參與（多個 RD 和多個美術）。到底誰正在執行什麼項目，會不會相撞（項目、執行者）？什麼項目其實已經完工了，需要被 archive 起來？資訊有沒有 outdate 問題？</p>

<p>Email + Excel 其實很不夠用&#8230;</p>

<h3>What you need : Project Management Tool</h3>

<p>其實由這一連串的問題整理下來，可以清楚的發現，一個專案需要的是什麼？這也是 Project Management Tool 可以提供給你的東西。</p>

<p>與其說 <a href="http://www.redmine.org/">Redmine</a>、<a href="http://www.atlassian.com/software/jira/overview">JIRA</a>、<a href="http://basecamp.com/">Basecamp</a> 是 Issue Tracking System，更精確的來說，它們應該被稱為「專案管理工具」。</p>

<p>要能夠的讓專案項目有計畫且順利的被執行，需要：</p>

<ul>
<li>一個地方可以透明的列出所有需要被執行的項目 (Issue List)</li>
<li>一個地方可以列出階段內需要被執行的項目 ( Issue Milestone )</li>
<li>一個可以記載 內容，狀態、優先權、日期、分派者、觀察者，且具有「permalink」、「權限控管」，且讓大家可以討論執行項目細節的地方。(Issue Ticket)</li>
<li>可以 cross reference 或具有子票功能</li>
<li>一個地方可以整理統合專案現在所有的相關資訊。( Wiki 功能)</li>
<li>一個地方可以看到自己今天需要 Focus 進行哪些項目（Issue Personal Dashboard)</li>
<li>一個地方能讓 Manager 可以看到自己的 Employee 正在進行哪些項目，這些項目目前的狀態是什麼。（Issue Query)</li>
</ul>


<p>至於我個人一直以來偏好的系統，就是 <a href="http://www.redmine.org/">Redmine</a>。尤其是近一兩年的版本，Issue Query 的加強和 子票 / 相關票的功能被開發出來， 讓我在專案管理上更加的得心應手(註2)。</p>

<h4>簡單歸納</h4>

<p>專案往往會搞到失火，或是時間不夠用。問題往往出在整個專案之間的「不透明」。</p>

<ul>
<li>搞不清楚總共有多少事需要完成</li>
<li>搞不清楚目前這件事的進行狀態</li>
<li>搞不清楚今天要進行哪些事</li>
<li>搞不清楚現在正在做的事，是否跟「目前」的全局有強大的正關聯</li>
<li>搞不清楚哪些事必須在何時就需要「確切」的被完成，否則就會產生重大風險</li>
</ul>


<p>要讓專案順利上線，一套好的 issue tracking system 是不能少的啊。</p>

<ul>
<li><p>註 1: 我一直以為裝個 issue tracking system 是常識。為什麼會寫這種「常識」等級的東西？因為我後來發現這完全不是「常識」，特別對 「PM」 來說不是「常識」（顛覆了我的認知&#8230;orz）！之前在某社服務時，就發現他們竟然沒有這種東西，提議要部門內架設還被當作是異類。接著所有高階主管討論了超過一個月才勉強決定要裝 issue tracking。接著又花了兩個月的時間討論要裝哪一套 issue tracking，再花了一個月才把決定好的 issue tracking 架起來。真是嘆為觀止！&#8230;實在受不了種種的低效率，最後早早 say bye。</p></li>
<li><p>註 2: 切票示範 (已取得授權)</p>

<ul>
<li>Redmine Nested Ticket Sample : <a href="http://www.flickr.com/photos/xdite/6469521821/sizes/o/in/photostream/">http://www.flickr.com/photos/xdite/6469521821/sizes/o/in/photostream/</a></li>
<li>Redmine Milestone Sample: <a href="http://www.flickr.com/photos/xdite/6469526205/sizes/o/in/photostream/">http://www.flickr.com/photos/xdite/6469526205/sizes/o/in/photostream/</a></li>
</ul>
</li>
</ul>


<p>＝＝＝＝</p>

<p>系列文章：</p>

<ul>
<li><a href="/posts/2012/03/17/website-online-todo-1/">網站程式上線前需要準備的事 （一）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-2/">網站程式上線前需要準備的事 （二）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-3/">網站程式上線前需要準備的事 （三）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-4/">網站程式上線前需要準備的事 （四）</a></li>
<li><a href="/posts/2012/03/19/website-online-todo-5/">網站程式上線前需要準備的事 （五）</a></li>
</ul>


  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/18/website-online-todo-3/">網站程式上線前需要準備的事 （三）</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-18T02:48:00+08:00" pubdate  data-updated="true" >Mar 18<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/18/website-online-todo-3/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/18/website-online-todo-3/" data-show-faces="false"></div></div>
    
    <h2>第 3 件事：制定 Art / RD 都遵守的開發 convention</h2>

<p>在傳統的開發過程中，作法多半都是：規劃 => UI / 畫面設計 => 程式設計。</p>

<p>其實若專案規劃階段結束的早（也就是實作類似最低可行產品產品的概念），並非需要等待 UI / 畫面設計 完工，才可以進行到「套版」（程式設計）的階段。</p>

<p>一直以來，我都認為「套版」是一個非常不好的說法，造成了偏差的印象。因為一個網站實際上是「一整套」的「軟體」，並非是「畫面」設計的出來，程式就配合寫的出來。雙方必須都要是可以執行實作的部分才行。</p>

<p>程式一定要實際的「美術畫面」被設計出來才能夠被接著實作嗎？其實不是這樣的：只要有 wireframe，RD 往往就可以先行動工。</p>

<p>但問題來了：若雙方各自進行自己的部分，那最後要怎麼組起來？</p>

<p>這其實還不是最大的問題。</p>

<p>最大的問題，其實是 Art 切出來的「版」，多半是不能夠被「套」的。</p>

<h2>畫面不是切得出來就能「套」</h2>

<p>這個問題其實不能夠怪 Art，它們有的是藝術細胞，並非邏輯細胞。而：</p>

<ul>
<li><p>能夠熟練 Photoshop，並 <code>不代表</code> 能夠寫出良好結構的 HTML 與 CSS code。</p>

<ul>
<li>這需要一定的經驗以及技術實力。</li>
</ul>
</li>
<li><p>能夠切出 HTML 與 CSS，並 <code>不代表</code> 這一份原始碼，可以被實際使用。</p>

<ul>
<li>有一些 Art 只懂得 PSD to table，整個畫面毫無結構可言，讓人頭痛萬分。</li>
<li>有一些 Art 專精製作單頁的活動頁面，但 application 需要整套的 DOM 能夠重複利用，CSS 一旦被重疊使用時大爆炸。</li>
</ul>
</li>
</ul>


<p>在傳統的專案進行到「套版」階段，程式開發進度會難以掌控的其中一個原因。也是因為：RD 面對著一套爛 HTML，完全不知從何下手「套」進去。不改結構無法讓程式運作，或者程式運作效率會很低；但一改結構，就別肖想 Art 再幫你調整細部 style 和追加細節了。（東西被改的不爽情緒或原始結構被改變）</p>

<p><strong>「套版」這個過程中無端被追加浪費了大量時間</strong>，這也是一個上線前的隱藏變因。</p>

<h3>解決方法：製作一套 HTML / CSS 設計準則</h3>

<p>多數的 application 有固定結構的 DOM。差異在於  &lt;div id=&quot;content&quot;&gt; &lt;/div&gt; 內的不同。
至於</p>

<ul>
<li>header</li>
<li>sidebar</li>
<li>warning</li>
<li>form</li>
<li>footer</li>
<li>etc&#8230;</li>
</ul>


<p>其實多半是相同的。</p>

<p>與其抱怨 Art 切出來的東西不能被套，不如設計一套 general 的實際準則可以被大家遵守學習。</p>

<p>不僅僅是 HTML 設計規則，其實開發當中會花掉很多時間的，還包含一些常見的 CSS hack / IE hack。這些也可以被整理起來，節省開發時間（當然，現在你只要學 <a href="http://compass-style.org/">compass</a> 就好）。</p>

<h2>平行開發互動：解決多人團隊的偏好歧異問題</h2>

<p>剛剛有一個問題我們沒有回答到：就是個人偏好如何「組合」？</p>

<p>比如說美術的版裡面有這樣的 DOM &lt;div class=&quot;article&quot;&gt; &lt;/div&gt;，class 是 <code>article</code>。</p>

<p>但是 RD 實際的程式碼卻是 <code>post</code> 這樣的物件名稱。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;% @posts.each do |post| %&gt;
</span><span class='line'>  &lt;%= post.title %&gt;
</span><span class='line'>&lt;% end %&gt;</span></code></pre></td></tr></table></div></figure>


<p>這樣「套」起來不是很有問題嗎？如何實現所謂我說的「平行開發」？</p>

<p>其實 Art / RD 雙軌平行開發，才可以有效的為專案爭取到時間。</p>

<p>其實之前的所謂「套」，因為有完工的時間壓力，DOM 往往不能夠被更改。但是不改 DOM 又不能讓專案繼續被執行下去。</p>

<p>若是雙方平行開發，又有一個 deployable 的 application 讓進度透明，所有的修改和溝通調整，只是一下子的功夫(article 與 post 的不同，可以在很早期就被抓出來修掉），不但不會打亂開發節奏，反而會加速專案的進行。</p>

<p>＝＝＝＝</p>

<p>系列文章：</p>

<ul>
<li><a href="/posts/2012/03/17/website-online-todo-1/">網站程式上線前需要準備的事 （一）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-2/">網站程式上線前需要準備的事 （二）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-3/">網站程式上線前需要準備的事 （三）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-4/">網站程式上線前需要準備的事 （四）</a></li>
<li><a href="/posts/2012/03/19/website-online-todo-5/">網站程式上線前需要準備的事 （五）</a></li>
</ul>


  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/18/website-online-todo-2/">網站程式上線前需要準備的事 （二）</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-18T01:24:00+08:00" pubdate  data-updated="true" >Mar 18<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/18/website-online-todo-2/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/18/website-online-todo-2/" data-show-faces="false"></div></div>
    
    <h2>第 2 件事：application deployable from day 1</h2>

<p>在進入開發階段後，我會做的第一件事： <strong> make application deployable</strong></p>

<p>也就是：專案開始第一天，就必須要有個 production 直接可運行（可以鎖密碼，當作測試 server）才行。（我在 <a href="http://rails-101.logdown.com">Rails 101</a> 這本書最後一章，加入 capistano 與裝機為必練技能，就是這個緣故。）</p>

<p>為什麼專案需要 deployable？</p>

<h2>提前控制風險：開發環境與線上環境的不同</h2>

<p>在一般的經驗中，往往在在專案進行到尾聲快上線之時，才會注意到一個可能使專案時程大爆炸的事情：<strong> 開發端與線上端的環境通通不一樣 </strong>。</p>

<p>在開發過程中，所有人只專注在自己的機器上能不能動，這是常態。專注在實現功能，東西有缺就先在 local 上塞假資料。在最短時間內將 feature 盡可能寫完絕對是第一要務。</p>

<p>但很可惜的，寫完並 <code>不等於</code> 放到正式環境上可以動。</p>

<p>網站上其實非常多功能需要實際被「真人」測試，才會知道到底有沒有問題。有一些設定，甚至開發環境與上線完完全全不一樣。（以 Rails 來說，其實就差很多。比如說程式 class 會不會被 cache，asset 有沒有 optimize，上傳路徑以及與第三方接軌的設定等等&#8230;）</p>

<p>如果拖到最後一個月才作 deploy 的這件事，因為「到底有多少東西不一樣」，變成了一個完全的未知數。原本夠用的一個月測試期，被這樣一壓縮可能完完全全就不夠用了。而且因為專案截止日已進，隨之而來的壓力更加大了犯錯的可能性。</p>

<h2>一個透明的已知進度</h2>

<p>Day1 就有一個可以直接實際測試的站台，還有一個很大的好處，能夠確保專案中所有人都知道現在進度，與規格書上的東西到底差多少。如果有重大瑕疵，或者是絕對不可行的功能，就可以早早會提出修改，下架等等。節省大家寶貴的開發精力。</p>

<p>如果專案截止日最後十五天，大家才知道很多東西原來根本是作不出來的，或者是跟原本想像差太多的，這時候鐵定陷入交相指責，一遍慌亂的狀況。</p>

<h3>絕對注意：捍衛進度</h3>

<p>不過這一招的使用，專案經理或者是 RD 主管要特別注意。因為 Day 1 就有一個直接可以看的站台，不少完全不懂「技術」的專案參與者（通常是企劃或老闆），會對網站的「裸站」狀態感到極度的恐慌，他們會挑剔 UI，會不滿 implement 細節，進而想要實際插手進度修改內容。請務必堅持住，堅持到進入最後一個階段：測試修飾期才可以讓他們修改（通常進入準完工階段，裸站狀態其實也消失了，當初挑剔的東西幾乎在這個階段不復存在，故也沒有修改的必要。）</p>

<p>P.S. 可以架設一個 issue tracking system，把他們提出的修改事項先通通記起來，但通通不實作。等到接近測試期，再來看看這些當初的「建議」到底還有哪些實際需要被執行。</p>

<p>只有「完全不合實際應用」的東西，或者是「變更會讓實作方式更合理」的東西可以在整個開發期，被丟入排程中。</p>

<p>否則，他們的驚慌，會害這個專案完全結不了案。</p>

<p>＝＝＝＝</p>

<p>系列文章：</p>

<ul>
<li><a href="/posts/2012/03/17/website-online-todo-1/">網站程式上線前需要準備的事 （一）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-2/">網站程式上線前需要準備的事 （二）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-3/">網站程式上線前需要準備的事 （三）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-4/">網站程式上線前需要準備的事 （四）</a></li>
<li><a href="/posts/2012/03/19/website-online-todo-5/">網站程式上線前需要準備的事 （五）</a></li>
</ul>


  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/17/website-online-todo/">網站程式上線前需要準備的事 （一）</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-17T23:48:00+08:00" pubdate  data-updated="true" >Mar 17<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/17/website-online-todo/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/17/website-online-todo/" data-show-faces="false"></div></div>
    
    <p>很多人知道如何實作網站功能。但是卻不知道如何將網站成功的完工，並且如期上線。往往明明專案開始之初有不少的工期，有不錯結果的卻很少。上線前後總是一團慌亂。</p>

<p>其實「上線」這件事情完全是可以被掌控的。這當中有不少眉角，只是多半被疏於控制，導致風險橫生。</p>

<p>在回答別人幾次這樣的問題之後，我決定把我的經驗分享整理出來：</p>

<h2>第 1 件事：界定時程</h2>

<p>這是我認為在專案管理過程中，最重要的一件事。累積參與過幾十個專案下來的經驗之後，我發現上線前手忙腳亂的原因，幾乎都是時程的安排不當。時程混亂冒出的很多風險又沒有被妥善的管理，最後才大失火&#8230;</p>

<h3>傳統瀑布式專案進行法：寶貴的時間被大量的浪費</h3>

<p>一般的專案進行方式，雖然都會有確切的完工期，但專案進行的方式往往會形成相當的浪費而最後造成大量的風險。</p>

<p>比如說一個需要 6 個月工期的案子進度通常是這樣的：</p>

<ul>
<li>花了 3 - 4 個月無盡的訪談需求</li>
<li>花了 1 個月請美術設計視覺與介面，以及反覆修改</li>
<li>最後剩下不到 1 個月請 RD 寫程式</li>
</ul>


<p>=> 完全來不及寫完程式 => 半成品上線</p>

<p>上線後一個月：</p>

<ul>
<li>到處都是 Bug</li>
<li>發包方抱怨</li>
<li>使用者抱怨</li>
</ul>


<p>上線後第二個月：</p>

<ul>
<li>終於寫完當初規劃的程式</li>
<li>終於修完大部分的 Bug</li>
<li>使用者早已認定這是個未完工的網站，不再來訪</li>
</ul>


<p>上限後第三個月：</p>

<ul>
<li>因為網站規劃不良，使用者對這個網站不感興趣</li>
<li>因為網站規劃不良，預計的成效沒有出來</li>
<li>還有資源 => 繼續籌畫下六個月的改版</li>
<li>已無資源 => 死城</li>
</ul>


<h3>「規劃」從來不是最重要的事</h3>

<p>「規劃」其實絕對不是開發一個網站的最重頭項目。「施工」和「調整」才是。</p>

<p>傳統的專案進行方式往往會掉進一個陷阱：六個月看似非常長，於是就大膽的將大部分的時間都丟入「規劃」這個一階段，因為沒有時間壓力，於是會議也通常沒有結論，或者是 feature 發散。等到驚覺時間已大幅燃燒殆盡，再不進行開發絕對完蛋，才匆匆結束。</p>

<p>「規劃」畢竟是個空想產物，等到實際請美術設計頁面，又會發現很多畫面以及 UI 實際上不可能完成。</p>

<p>於是在這一個月，團隊又會大幅的來回修改刪除功能：直到一個勉強接受的範圍，等到視覺完工再轉交給程式設計師「套版」。</p>

<p>在上一個階段，粗估的一個月往往是不夠用的。因為還牽扯到往來的修改時間。而這時交出的產品 scope，也僅只限於「UI」部分有辦法被完成。</p>

<p>「UI」部分有辦法被完成 <code>不等於</code> 「功能」有辦法被完成。有時候畫面上一個小小的按鍵功能，背後的基礎開發工時可能要花上三個月。</p>

<p>最終的上線版本，因為不夠時間了，通常最後只有寫完當初規劃出的功能的 10 - 30% 。而且 Bug 還很多。（因為時間關係，只有辦法完成勉強達到 UI 操作的目的，細部細節根本來不及實作）</p>

<p>最後成效不彰，檢討會議上大家互相指責。但無論如何怎麼檢討來檢討去，完全沒有人會把最根本的問題朝向「規劃時間太長」，只會輕描淡寫的用「必要之惡」一筆代過。</p>

<h3>我的方法：從後面倒回來推算時程</h3>

<p>我的作法完全相反。如果一個工期是六個月。我會這樣分：</p>

<ol>
<li>什麼時候要上線：上線前 1 個月前要 Feature Complete，留足夠的時間進行各樣測試和修復 bug。(剩下 5 個月可以用)</li>
<li>寫程式要花多久時間：寫程式要花多久時間是不一定的事，但是可以粗估不出包的時間大概是 2 - 3 個月，可以粗抓 2.5 個月。（剩下 2.5 個月）</li>
<li>視覺設計要花多久時間：畫面設計要花多久的時間也是不一定的事，，但是可以粗估不出包的時間大概是 1 - 2 個月，可以粗抓 1.5 個月。（剩下 1 個月）</li>
<li>是的。只剩下 1 個月時間可以開會、規劃、畫草圖。請不要浪費時間。</li>
</ol>


<p>只有 1 個月，是否不夠時間詳細規劃功能？</p>

<p>完全不會。</p>

<p>我會在以後其他的專案管理文章解釋為什麼。</p>

<p>＝＝＝＝</p>

<p>系列文章：</p>

<ul>
<li><a href="/posts/2012/03/17/website-online-todo-1/">網站程式上線前需要準備的事 （一）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-2/">網站程式上線前需要準備的事 （二）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-3/">網站程式上線前需要準備的事 （三）</a></li>
<li><a href="/posts/2012/03/18/website-online-todo-4/">網站程式上線前需要準備的事 （四）</a></li>
<li><a href="/posts/2012/03/19/website-online-todo-5/">網站程式上線前需要準備的事 （五）</a></li>
</ul>


  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/07/rail-101-install-practice/">Rail 101 裝機實務以及改版通知</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-07T17:01:00+08:00" pubdate  data-updated="true" >Mar 7<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/07/rail-101-install-practice/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/07/rail-101-install-practice/" data-show-faces="false"></div></div>
    
    <p>Hi, 各位讀者好。</p>

<p>因為 Apple 一直在改變 XCode 的編譯套件位置，所以 <a href="http://rails-101.logdown.com">Rails 101</a> 內附的裝機實務已經過期了。</p>

<p>我最近正在籌劃下一次的改版，已經進行的差不多了。將會直接 support 到 Rails 3.2.2。</p>

<p>不過因為裝機實務這個步驟比較會卡到大家，所以我先放這個章節: <a href="/mac-lion-xcode-ruby-rails-192/">Rails on Mac 安裝最佳實務</a> 出來給大家使用。</p>

<p>若您在裝機上還碰到什麼問題，請至 <a href="http://ruby-taiwan.org/">Ruby Taiwan Group</a> 上面回報。</p>

  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/06/iphone4s/">iPhone 4S 進洗衣機洗還是有救</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-06T22:53:00+08:00" pubdate  data-updated="true" >Mar 6<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/06/iphone4s/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/06/iphone4s/" data-show-faces="false"></div></div>
    
    <p>一兩個禮拜之前因為太累，我回家時忘記把 iPhone 4S 從牛仔褲掏出來。洗完澡之後就恍神直接把髒衣服拿去洗衣機直接洗了。</p>

<p>一兩個小時，等我回神過來之後，要幫手機充電，才發現手機已經躺在洗衣機裡面被洗得亮晶晶了。這還不夠，手機還是在開機狀態進去洗的，跟一般只是掉到馬桶進水的狀況不一樣。</p>

<p>Anyway，朋友建議我拿去 忠孝新生站 3 號出口的 <a href="https://www.facebook.com/MacLoveTaiwan">麥克愛愛</a> 碰運氣修看看。傳說中這是一間服務非常棒的水果商，他們也「兼修」iPhone 這樣&#8230;.</p>

<p>賭賭運拿去麥克愛愛修幾天後，幾天店員回電說檢修後發現主機版、螢幕和無線網路模組都炸光光了。維修費用應該會是 ㊙（遠低於我的預算，反正在一萬以內），不過他想他還是可以幫我修看看。</p>

<p>今天被通知修好了，所以就過去拿了。除了香噴噴（咦？）亮晶晶以外（開玩笑，我都用熊寶貝幫他洗澡了&#8230;），手機也跟新的一樣活跳跳的回到我手上了。</p>

<p>感謝 <a href="https://www.facebook.com/MacLoveTaiwan">麥克愛愛</a> 幫我修好手機，所以特此寫這一篇文章推薦他們。如果你有蘋果電腦或者是 iPhone 手機的問題，歡迎找他們。服務真的相當專業到位。</p>

<p>電話與聯絡方式在 <a href="https://www.facebook.com/MacLoveTaiwan">麥克愛愛的臉書專頁</a> 有，出發之前請先電話預約洽詢。</p>

  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/05/github-hacked-rails-security/">從 Github 被 Hack，談 Rails 的安全性（ Mass-assignment ）</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-05T10:51:00+08:00" pubdate  data-updated="true" >Mar 5<span>th</span>, 2012</time>
        
         | <a href="/posts/2012/03/05/github-hacked-rails-security/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/05/github-hacked-rails-security/" data-show-faces="false"></div></div>
    
    <p>關於 Github 被入侵這件事，目前在國外開發圈傳的沸沸揚揚。看來中文圈還沒有消息，我來報導一下到底發生了什麼事好了。順便宣導一下開發 Rails 程式碼需要注意的其中一個觀念..</p>

<h2>到底發生了什麼事</h2>

<p><a href="https://github.com/rails/rails">Rails</a> 的 master 被某個 hacker 塞上這一段 <a href="https://github.com/rails/rails/commit/b83965785db1eec019edf1fc272b1aa393e6dc57">commit</a>。以證明 Github 是可以被入侵的。</p>

<h2>為什麼會發生這件事（糾紛起源）</h2>

<p>有個俄羅斯 Hacker : <a href="homakov">homakov</a> 到 Rails 的 Github issue 頁，report 了一個 <a href="https://github.com/rails/rails/issues/5228">issue</a>。</p>

<p>聲稱他發現很多「中等程度以下的」Rails 開發者開發任何網站，都沒有在 model 內作上任何 <a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible">attr_accessible</a> 的防護，這樣會引起很多安全性的問題。</p>

<p>Rails 官方應該設計一個機制強迫大家一定得「使用」<a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible">attr_accessible</a>。</p>

<p>因為寫 code 要塞 attr_accessible 被多數開發者認為是根本是一個「常識」。所以這個 issue 很快就被 Rails core team 關掉了。他的意見是這不是 Rails 的問題，而是開發者的問題。（正常人都會做出這樣的反應）</p>

<p>這個 Hacker 覺得他好心來報告，但是卻被忽視，感到很生氣。</p>

<p>於是！他 Hack 了 Github 證明這件事情是真的。</p>

<p>他不僅利用這個漏洞在 rails/rails 中塞了 <a href="https://github.com/rails/rails/commit/b83965785db1eec019edf1fc272b1aa393e6dc57">commit</a> ，連當初被關掉的 <a href="https://github.com/rails/rails/issues/5228">issue</a> ，也用同樣方法打開了。</p>

<p>所以這下就鬧到舉世震驚了！…XDDDDD</p>

<h2>為什麼會發生這件事（剖析 Rails ）</h2>

<h3>從 Rails 表單機制談起</h3>

<p>Rails 秉持著 Don&#8217;t Repeat Yourself 的精神，將 Form 表單 Helper 直接與 Model 欄位直接結合，節省不少開發者撰寫表單的時間，是一個很聰明的作法。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="sx">%= form_for @post do |f| %&gt;</span>
</span><span class='line'><span class="sx">  &lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">text_field</span> <span class="ss">:title</span> <span class="sx">%&gt;</span>
</span><span class='line'><span class="sx">  &lt;%= f.text_area :content %&gt;</span>
</span><span class='line'>  <span class="o">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">sumbit</span> <span class="s2">&quot;Submit&quot;</span> <span class="sx">%&gt;</span>
</span><span class='line'><span class="sx">&lt;% end %&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>當表單送出後，會被壓縮成一個 params[:post] 這樣的 Hash。controller 裡面透過 massive-assignment 的技巧直接 mapping 進 Model 裡。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">PostController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>     <span class="vi">@post</span> <span class="o">=</span> <span class="n">current_user</span><span class="o">.</span><span class="n">posts</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:post</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>     <span class="k">if</span> <span class="vi">@post</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'>       <span class="c1"># do something</span>
</span><span class='line'>     <span class="k">else</span>
</span><span class='line'>       <span class="c1"># do another thing</span>
</span><span class='line'>     <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>這是一個自 Rails 誕生以來就有的機制了，十分便手。</p>

<p>有些不了解的 Rails 的其他 Developer 批評這是一個不安全設計，並因此拒絕使用 Rails。欄位暴露在外被人知道，讓他們感到非常不自在。</p>

<p>萬一被人猜到 user 權限是用 user.is_admin 作為 boolean 值，這樣豈不是很危險嗎？在修改個人資訊頁時，假造 DOM 就不是可以把自己提升為 admin 了嗎？</p>

<h3>Rails 內建的安全防禦措施</h3>

<p>Rails 也不是沒有針對這件事設計出防禦措施，有兩組 model API ：<a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible">attr_accessible</a> 與 <a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected">attr_protected</a>。其實也就是 白名單、黑名單設計。</p>

<p>把 <a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible">attr_accessible</a> 加在 model 裡，可以擋掉所有 massive assignement 傳進來的值，只開放你想讓使用填寫的欄位。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">attr_accessible</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:content</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>而 <a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected">attr_protected</a> 是完全相反地機制。</p>

<h3>知名認證 Plugin 皆內建 attr_accessible</h3>

<p>也因為 user.is_admin 幾乎是所有懶惰開發者會寫出來的 code。因此長久的歷史演變下來，許多知名認證 plugin，如 <a href="https://github.com/plataformatec/devise">devise</a> ，restful-authentication 等等…，在 User model 裡都會加上 attr_accessible（你可能沒有察覺到，因為可能是透過 include Module 塞進來的功能）。</p>

<p>因為是隱藏的內建防禦，很多不夠經驗的開發者，反而會被這道自動防禦整到，在設計修改使用者資訊這個功能時，常常表單明明沒問題，但就是修改不了除了密碼和 email 以外的欄位 XDDD</p>

<h3>User model 自動防禦，那其他 model 呢？</h3>

<p>好問題！這就是這次 Github 發生的問題。嚴格來說，根本不是 rails/rails 的錯，<strong>而是 Github 內某個被罵 mid/junior level 的 developer 的錯</strong>。他根本沒有對其他 model 作上保護，才被 hacker 有機可趁。</p>

<p>Hacker 也是想要證明連 Github 都會犯這種錯，才會鬧出這種事件</p>

<h2>看到 Github 的事件，我該做什麼？</h2>

<p>請回家讀這兩組 model API ：<a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible">attr_accessible</a> 與 <a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected">attr_protected</a> 的作用。</p>

<p>並檢查你的 project 內是否有類似問題：一般來說，容易被攻擊的點都跟 relation 比較有關係。也就是 xxxxx_id 的部分都要清查。</p>

<h3>Scoped Mass Assignment</h3>

<p>這是 Rails 3.1 加入的新 feature : scoped mass assignment，
<a href="http://enlightsolutions.com/articles/whats-new-in-edge-scoped-mass-assignment-in-rails-3-1">http://enlightsolutions.com/articles/whats-new-in-edge-scoped-mass-assignment-in-rails-3-1</a>。</p>

<p>我也建議你閱讀。</p>

<h2>Rails core team 目前的解法</h2>

<p>大師 Yahuda Katz (wycats) 目前起草了一份新的 <a href="https://gist.github.com/1974187">proposal</a>，並且丟在 <a href="http://news.ycombinator.com/item?id=3664334">Hacker News</a> 讓鄉民討論。應該可能近期就會近 Rails core 或以 plugin 的方式釋出。</p>

<h2>我個人的感想</h2>

<p>其實昨晚睡前看到一堆人說 Github 被 Hacked 掉，然後追了幾篇討論串之後，覺得真的是沒什麼，因為就我來說，的確應該就是這個 hacker 覺得有必要提醒大家，但這對多數的 Rails Developer 來說，根本是超小的小事，不值得這麼大驚小怪。</p>

<p>結果憤怒的 Hacker 攻擊了 Github，Github 真的還因為某個 developer 犯了低級錯誤中招。但我還是覺得沒什麼…</p>

<h2>XSS V.S. Massive Assignment</h2>

<p>後來睡醒以後才發現不對，其實這東西應該要被拿來跟 auto escape 相比：XSS 是一般設計 Web Application 最容易中招的攻擊。</p>

<p>XSS 的原因肇因是讓開發者開放讓使用者自行輸入內容，然後無保護的讀出來，Hacker 會利用這種漏洞，寫進有害的 JavaScript 讓使用者中招。正確的方式應該是：內容讀出來之後，都要利用 html_escape 濾掉。</p>

<p>問題是，html_escape 濾不勝濾，沒有開發者能夠那麼神，寫任何一段 code 都會自律的加上 h(content)。最後 Rails core 痛定思痛，在 Rails 3.0 後效法 Django 的設計，在讀出 content 時，一律先 escape。除非有必要，才另行設定不需 escape。</p>

<p>我想這次的 massive assignment 問題應該也要比照辦理才對…</p>

<h2>延伸閱讀：</h2>

<p>國外鄉民懶人包：<a href="http://chrisacky.posterous.com/github-you-have-let-us-all-down">GitHub and Rails: You have let us all down.</a></p>

<p>DHH 給出的 37Signals 的作法：<a href="https://gist.github.com/1975644">https://gist.github.com/1975644</a></p>

  </div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/posts/2012/03/02/my-start-up/">我創業了，我的公司 RocoDev</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2012-03-02T01:59:00+08:00" pubdate  data-updated="true" >Mar 2<span>nd</span>, 2012</time>
        
         | <a href="/posts/2012/03/02/my-start-up/#disqus_thread">Comments</a>
        

      </p>
    
  </header>


  <div class="entry-content">
    
      <div class="FacebookLikeButton"><div class="fb-like" data-href="http://blog.xdite.net/posts/2012/03/02/my-start-up/" data-show-faces="false"></div></div>
    
    <p>我創業了。從 2012/03/01 開始，我跟我的好友：國內頂尖的視覺設計師 <a href="http://twitter.com/evenwu">@evenwu</a> 合組了一間新公司 <a href="http://rocodev.com">RocoDev</a>。</p>

<p>我們專營：</p>

<ul>
<li>Ruby on Rails Web Application 設計</li>
<li>HTML5 / Responsive Design 視覺與網頁設計</li>
<li>網站體質優化 ( SEO / HTML5 semantic / Alexa ranking)</li>
</ul>


<p>有興趣的朋友可以歡迎找我們洽談服務。</p>

<p>至於我創業的原因，寫在這裡：「<a href="http://xdite-smalltalk.tumblr.com/post/18303489993">我為什麼想創業</a>」。</p>

<p>這也是我另外的一個小部落格，我對於人生的感觸和一些沒有那麼硬的短文會放在這裡。</p>

  </div>
  
  


    </article>
  
  <nav class="pagination">
    <div>
      
        <a class="prev" href="/blog/page/3/">&larr; Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/">Newer &rarr;</a>
      
    </div>
  </nav>
</div>
<aside class="sidebar">
  
    <section>
  <h1> About</h1>
  
  <p>
    A software development blog by <a href="/author">xdite</a> &#8230;
  </p>
  
  <p><a href="http://feeds.feedburner.com/xxddite"><img src="http://feeds.feedburner.com/~fc/xxddite?bg=99CCFF&amp;fg=444444&amp;anim=1" height="26" width="88" style="border:0" alt="" /></a></p>
  

  <p><a href="http://twitter.com/xdite" class="twitter-follow-button">Follow @xdite</a><br />
  </p>
  
  <p><img src="/images/xdite-email.png"></p>
  
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/posts/2012/07/09/3-way-to-speedup-asset-pipeline/">3 招實用 Asset Pipeline 加速術</a>
      </li>
    
      <li class="post">
        <a href="/posts/2012/05/13/the-startup-owners-manual-02/">The Startup Owner&#8217;s Manual 讀書心得（2）: New-product introduction model 致命的九宗罪</a>
      </li>
    
      <li class="post">
        <a href="/posts/2012/05/12/the-startup-owners-manual-01/">The Startup Owner&#8217;s Manual 讀書心得（1）: 別再使用製造業思維搞 Startup</a>
      </li>
    
      <li class="post">
        <a href="/posts/2012/05/06/how-to-prepare-self-travel/">如何準備美國自助旅行（行程準備篇）</a>
      </li>
    
      <li class="post">
        <a href="/posts/2012/04/25/railsconf-2012-3/">Railsconf 2012 - 國際性 Conference 是這樣辦的 （下）</a>
      </li>
    
  </ul>
</section>

<section id="popularthreads" class="dsq-widget">
  <h2 class="dsq-widget-title">Popular Threads</h2>
  <script type="text/javascript" src="http://xdite-wp-blog.disqus.com/popular_threads_widget.js?num_items=5"></script>
</section>

<section id="recentcomments" class="dsq-widget">
  <h2 class="dsq-widget-title">Recent Comments</h2>
  <script type="text/javascript" src="http://xdite-wp-blog.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=24&excerpt_length=50"></script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("xdite", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/xdite" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @xdite</a>
  
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - xdite -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
    
      var disqus_shortname = 'xdite-wp-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-537077-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>





</body>
</html>
